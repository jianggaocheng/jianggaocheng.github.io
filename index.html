<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.3.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.3.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.3.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '6.3.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta property="og:type" content="website">
<meta property="og:title" content="好">
<meta property="og:url" content="http://blog.cc-lab.cn/index.html">
<meta property="og:site_name" content="好">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="好">






  <link rel="canonical" href="http://blog.cc-lab.cn/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>好</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">好</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">好好学习，天天向上。——蒋杲程的个人网站</p>
      
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档</a>
  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.cc-lab.cn/flutter-vs-reactnative/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="蒋杲程">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="好">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/flutter-vs-reactnative/" itemprop="url">
                  Flutter VS React Native
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-07-19 11:20:00 / 修改时间：13:26:03" itemprop="dateCreated datePublished" datetime="2018-07-19T11:20:00+08:00">2018-07-19</time>
            

            
              

              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/前端/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="Flutter-简介"><a href="#Flutter-简介" class="headerlink" title="Flutter 简介"></a>Flutter 简介</h4><p>目前 Hybrid App 主要分为两类: (1) 通过 WebView 加载本地网页，App 相当于本地网站。如 PhoneGap、Cordova、IOnic。 (2) 原生控件的跨平台抽象，如 ReactNative、Weex。    </p>
<p>Flutter 走了不一样的路：自己开发了一套原生控件，每个平台实现一遍，然后把渲染引擎（这套控件）打包在每个应用里面，因此性能没有问题，平台差异也很小。  </p>
<p>之所以不适用原生控件，是因为 Flutter 希望最终结果是更高质量的，如果 Flutter 使用原生系统 widget，Flutter 应用的质量和性能将受到这些 widget 本身质量的限制。  </p>
<h4 id="Flutter-和-ReactNative-底层架构的比较"><a href="#Flutter-和-ReactNative-底层架构的比较" class="headerlink" title="Flutter 和 ReactNative 底层架构的比较"></a>Flutter 和 ReactNative 底层架构的比较</h4><p><img src="/images/react-native-arch.png" alt="image"></p>
<p><img src="/images/flutter-arch.png" alt="image"></p>
<p>React-Native、Weex 核心是通过 Javascript 开发，执行时需要 Javascript 解释器，UI 是通过原生控件渲染。Flutter 与用于构建移动应用程序的其它大多数框架不同，因为 Flutter 既不使用 WebView，也不使用操作系统的原生控件。 相反，Flutter 使用自己的高性能渲染引擎来绘 制 widget。Flutter 使用 C、C ++、Dart 和 Skia（2D渲染引擎）构建。</p>
<p>Skia 是一个 2D的绘图引擎库，其前身是一个向量绘图软件，Chrome 和 Android 均采用 Skia 作为绘图引擎。Android 自带了 Skia，所以 Flutter Android SDK要比 iOS SDK小很多。</p>
<p><img src="/images/60b65d96e143455080769e600a72d2f6.png" alt="image"></p>
<p>在 ReactNative 中，引入了虚拟 DOM 来减少DOM的回流和重绘，系统将虚拟 DOM 与真正的 DOM 进行比较，生成一组最小的更改，然后执行这些更改，以更新真正的 DOM。最后，平台重新绘制真实的 DOM 到画布中。</p>
<p><img src="/images/43e854df1a2342d29435dfb401f95d2f.png" alt="image"></p>
<p>React Native 是移动开发的一大进步，并且是 Flutter 的灵感来源，但 Flutter 更进一步。 在 Flutter 中，UI 组件和渲染器已经从平台中集成到用户的应用程序中。没有系统 UI 组件可以操作，所以原来虚拟控件树的地方现在是真实的控件树。Flutter 渲染 UI 控件树并将其绘制到平台画布上。</p>
<h4 id="UI-一致性"><a href="#UI-一致性" class="headerlink" title="UI 一致性"></a>UI 一致性</h4><p>Flutter 因为是自己做的渲染，因此在iOS和Android的效果基本完全一致。<br>ReactNative存在将RN控件转换为对应平台原生控件的过程，存在一定的差异（如之前在调研里提到过的Button在iOS和Android下面显示效果不一样）。</p>
<h4 id="动态化技术"><a href="#动态化技术" class="headerlink" title="动态化技术"></a>动态化技术</h4><p>Flutter使用的Dart语言，支持AOT和JIT两种模式，在Dev时候，通过JIT可以实现热重载，开发者可以即时的看到代码修改的效果。而在Release Build的时候，通过AOT事先编译，来最大化的优化性能。因此目前Flutter不支持代码的热更新。  </p>
<p>ReactNative 的代码通过加载 JSBundle.js执行，JSBundle.js可以保存在本地，也可以通过远程加载。目前有很多RN的热更新方案供选择。</p>
<h4 id="App体积"><a href="#App体积" class="headerlink" title="App体积"></a>App体积</h4><p>Flutter iOS空项目 30M左右，Android空项目 7M左右。 （iOS需要额外集成Skia）<br>ReactNative iOS空项目 3M左右，Android20M左右。（根据Zoom Wiki上RN的调研，Android会加入OKHttp导致体积增大）  </p>
<p>Flutter 部分的底层功能在 Android 系统上已经有实现，因此 Android 上适配要好（RN在 Android 上有可能遇到兼容性问题）。ReactNative 在 iOS上面兼容性更优，facebook 官方很多 iOS only 的控件直接移植自 Native。并且目前 Flutter 还处于 beta阶段，issue比较多，在 demo上遇到键盘遮挡的问题，官方也需要等下一个版本解决。</p>
<h4 id="使用案例"><a href="#使用案例" class="headerlink" title="使用案例"></a>使用案例</h4><p>Google 的 AdWords 已经使用了Flutter进行开发。<br>国内阿里巴巴的闲鱼 Team 已经在部分页面使用了Flutter并输出了很多相关的技术文章。  <a href="https://juejin.im/user/5ac2db47f265da2393774122" target="_blank" rel="noopener">https://juejin.im/user/5ac2db47f265da2393774122</a><br><a href="https://flutter.io/showcase/" target="_blank" rel="noopener">https://flutter.io/showcase/</a></p>
<p>国外Facebook、Skype、Walmart、Uber、Instagrams<br>国内京东、QQ、手机百度等App使用ReactNative构建。<br><a href="http://facebook.github.io/react-native/showcase.html" target="_blank" rel="noopener">http://facebook.github.io/react-native/showcase.html</a></p>
<h4 id="第三方Library数量"><a href="#第三方Library数量" class="headerlink" title="第三方Library数量"></a>第三方Library数量</h4><p>Flutter 目前有1000+ library。<br>ReactNatve 专用library有11000+ （以react-native名称开头的包），与web开发可以共用的包700000+。  </p>
<h4 id="Flutter的优势"><a href="#Flutter的优势" class="headerlink" title="Flutter的优势"></a>Flutter的优势</h4><ul>
<li>运行效率上，Flutter和ReactNative都可以达到理论上的60帧的刷新率，来实现「Native般的流畅体验」，Flutter是全Native在执行，基于底层代码(Android 上为 C++ with NDK,iOS 上为 C++ with LLVM)，而ReactNative是Native控件 + JavaScript代码，实际性能上，Flutter应该优于ReactNative，据官方文档，Flutter可以在支持的设备上达到120FPS，而ReactNative的文档上，只提到了可以达到60FPS（RN是否支持120FPS未深入调研，文档上 RN 可以通过优化 diff 的方法提升渲染效率）。</li>
</ul>
<blockquote>
<p>[Flutter Performance Profiling]<br><a href="https://flutter.io/ui-performance/" target="_blank" rel="noopener">https://flutter.io/ui-performance/</a><br>Flutter aims to provide 60 frames per second (fps) performance, or 120 fps performance on devices capable of 120Hz updates.    </p>
</blockquote>
<blockquote>
<p>[ReactNative Performance]<br><a href="https://facebook.github.io/react-native/docs/performance" target="_blank" rel="noopener">https://facebook.github.io/react-native/docs/performance</a></p>
</blockquote>
<ul>
<li>兼容性上，Flutter 提供的 widget 都是基于 skia来实现和精心定制的，与具体平台没关，所以能保持很高的跨 os 跨 os version 的兼容性。<br>Flutter 从更基础的层去抹平平台差异，站在了更宽广、更可控的一个基础平台上去演变和发展。 </li>
</ul>
<ul>
<li>Flutter 官方提供了大部分 Material Design 控件的实现（甚至比 Android Design Support 实现的更多）。  </li>
</ul>
<h4 id="Flutter目前的不足"><a href="#Flutter目前的不足" class="headerlink" title="Flutter目前的不足"></a>Flutter目前的不足</h4><ul>
<li>Flutter官方没有对平板下的运行情况进行测试，有可能一些组件存在issue，目前所有widget都没有对平板进行特殊适配。</li>
</ul>
<blockquote>
<p><a href="https://flutter.io/faq" target="_blank" rel="noopener">https://flutter.io/faq</a><br>We do not test on tablets, so there may be issues with some widgets on tablets. We have not implemented tablet-specific adaptations in our widgets.</p>
</blockquote>
<ul>
<li>不支持3D</li>
</ul>
<blockquote>
<p><a href="https://flutter.io/faq" target="_blank" rel="noopener">https://flutter.io/faq</a><br>Today we don’t support for 3D via OpenGL ES or similar. We have long-term plans to expose an optimized 3D API, but right now we’re focused on 2D.</p>
</blockquote>
<ul>
<li><p>不支持windows app，ReactNative 可通过微软的<a href="https://github.com/Microsoft/react-native-windows" target="_blank" rel="noopener">https://github.com/Microsoft/react-native-windows</a> 开发 windows UWP 和 WPF 程序。</p>
</li>
<li><p>版本尚不成熟，目前 Flutter 官方建议的稳定版本还是 beta 版本。目前存在很多 issue，在目前调研中遇到的有「flutter doctor」环境检查误报错误、text input 会被软键盘遮挡、在设备上hot reload经常掉线等，很多问题官方的回应都是「will be fixed in next release」。</p>
</li>
<li><p>官方提供的组件大部分都以 Material Design 为主，iOS风格的组件比较少，对于需要用到 iOS 风格组件的情况，都需要自己手动绘制组件。</p>
</li>
<li><p>社区尚不成熟，开发中遇到问题，在官方文档、StackOverFlow 上都没有相关资料，最后在Github 的issue里找到了。</p>
</li>
</ul>
<h4 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h4><p>[为什么说Flutter是革命性的？] <a href="https://www.sohu.com/a/192998605_635110" target="_blank" rel="noopener">https://www.sohu.com/a/192998605_635110</a></p>
<p>[闲鱼技术 ReleaseFlutter的最后一公里] <a href="https://juejin.im/post/5b456ebee51d4519277b7761" target="_blank" rel="noopener">https://juejin.im/post/5b456ebee51d4519277b7761</a>  </p>
<p>[React Native VS Flutter评测] <a href="https://juejin.im/post/5b1e8b826fb9a01e3962618d" target="_blank" rel="noopener">https://juejin.im/post/5b1e8b826fb9a01e3962618d</a>  </p>
<p>[深入理解 Flutter 的编译原理与优化]  <a href="http://www.sohu.com/a/239579799_629652" target="_blank" rel="noopener">http://www.sohu.com/a/239579799_629652</a>    </p>
<p>[slant上关于ReactNative和Flutter的讨论]<br><a href="https://www.slant.co/versus/4650/17635/~react-native_vs_flutter" target="_blank" rel="noopener">https://www.slant.co/versus/4650/17635/~react-native_vs_flutter</a></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.cc-lab.cn/dingdong/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="蒋杲程">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="好">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/dingdong/" itemprop="url">
                  叮咚音箱对接遇到的问题
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-05-02 20:30:00" itemprop="dateCreated datePublished" datetime="2018-05-02T20:30:00+08:00">2018-05-02</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-07-19 11:19:41" itemprop="dateModified" datetime="2018-07-19T11:19:41+08:00">2018-07-19</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>叮咚音箱对接的方式和其他智能音箱大同小异，叮咚的云服务器，会把解析过后的结构化数据发送到我们自己的服务器，然后由我们的服务器去做逻辑处理，并将结果返回给叮咚音箱服务器，由音箱返回给用户。</p>
<p><img src="/images/dingdong.png" alt="image"></p>
<p>但在将叮咚音箱接入到智能家居和智慧酒店的方案中，遇到些问题，在这里记录下来供大家参考。</p>
<h4 id="语义文法的编辑比较复杂"><a href="#语义文法的编辑比较复杂" class="headerlink" title="语义文法的编辑比较复杂"></a>语义文法的编辑比较复杂</h4><p>语义文法的作用是让音箱将自然语言转换为程序可以处理的结构化数据。相比天猫精灵、小爱同学通过Web界面配置语义文法，叮咚音箱需要自行通过代码来编写科大讯飞语义开放平台的abnf文法。这种方式带来了非常强大的灵活性，但是对开发者来说，需要额外的学习成本来了解如何去解析自然语言，同时，在非专业系统的学习下写出的文法，未必会比Web界面配置出来的要好用。同时对于叮咚音箱本身来说，将来如果叮咚音箱要使用其他的语义平台，对于开发者来说可能要同时学习多种平台的文法编辑，或者能够将现有的abnf文法转换成其他平台的文法。</p>
<h4 id="语音识别"><a href="#语音识别" class="headerlink" title="语音识别"></a>语音识别</h4><p>在实际语音测试中，叮咚音箱多次出现了唤醒后不响应指令的情况，而且根据对接交流群里的反馈，这样的问题不只是我这边出现了，这说明在音箱的使用中还存在一些问题。出现这种情况，对于家庭和酒店的场景，可不能算“智能”。</p>
<h4 id="叮咚服务器不会传设备id"><a href="#叮咚服务器不会传设备id" class="headerlink" title="叮咚服务器不会传设备id"></a>叮咚服务器不会传设备id</h4><p>根据叮咚音箱对接文档，目前用于识别的字段仅有user，叮咚服务器并不会将设备的id发送过来。这是最后让我放弃将叮咚音箱接入智能设备的最主要原因，对于智能家居来说，对于智能家居来说，一个用户（user）买了多个智能音箱的情况，比较理想的交互是根据接收语音的音箱的不同执行不同的动作，举例来说，客厅和卧室各有一个叮咚音箱，当用户在客厅说开灯，会打开客厅灯，而在卧室说开灯，则会打开卧室灯。这需要在我们的程序内部，将音箱的id和智能家居后台的room绑定。基于目前的对接文档，对于多个叮咚音箱的家庭，我们也需要在控制语句中把房间包含进去，如“请打开客厅的灯”这样。<br>在智能家居中，尚可以通过指令中包含到具体房间来实现，在酒店项目中，我们是不可能让住客通过“请打开601房间的卫生间灯”这样的指令来控制的。在智慧酒店中，要通过叮咚音箱来实现控制酒店客房内的设备，只能通过注册多个账号来把user和酒店后台的room绑定。但这样的代价太大了（每个叮咚账号都需要通过手机号来注册，对于几百个房间的大酒店，管理这些账号是非常头疼的）</p>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p>综合来说，目前叮咚音箱并不适合智能控制类的项目使用，从厂家的主推方向来说，智慧酒店类的更适合天猫精灵（阿里旗下有未来酒店，已经和国内多个酒店客房控制系统厂家合作），智能家居类的项目更适合小爱同学（小米的智能产品本来就偏向家用）。但正如网上所言，语音识别已经达到了97%的准确率，但是为了修正3%的识别差异，用户需要花费更多的时间。智能音箱真正成为智能家居的入口，还有很多路要走，期待有一天，能够出现和人类顺畅交流的“真AI”智慧管家，为人类服务。</p>
<p>（完）</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.cc-lab.cn/wechat-jump-ai/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="蒋杲程">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="好">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/wechat-jump-ai/" itemprop="url">
                  用JavaScript玩微信跳一跳(iOS版)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-01-02 21:57:55" itemprop="dateCreated datePublished" datetime="2018-01-02T21:57:55+08:00">2018-01-02</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-07-13 10:33:26" itemprop="dateModified" datetime="2018-07-13T10:33:26+08:00">2018-07-13</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在Python版 <a href="https://zhuanlan.zhihu.com/p/32452473" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/32452473</a> 的基础上用NodeJS重新实现了所有代码，并优化了棋子识别的逻辑。</p>
<h4 id="实现原理"><a href="#实现原理" class="headerlink" title="实现原理:"></a>实现原理:</h4><p>通过WebDeviceAgent截取手机游戏图片，识别棋子和方块的位置，计算两者距离，算出按压屏幕的时间。</p>
<h4 id="所需工具："><a href="#所需工具：" class="headerlink" title="所需工具："></a>所需工具：</h4><p>Xcode<br>iOS手机<br>NodeJS</p>
<h4 id="操作步骤："><a href="#操作步骤：" class="headerlink" title="操作步骤："></a>操作步骤：</h4><p>安装WebDeviceAgent，可以参考 iOS 真机如何安装WebDriverAgent<br>从<a href="https://github.com/jianggaocheng/wechat_jump_game_node.git拉取代码" target="_blank" rel="noopener">https://github.com/jianggaocheng/wechat_jump_game_node.git拉取代码</a><br>执行npm install安装依赖组件<br>运行安装好的 WebDriverAgentRunner<br>将手机点击到《跳一跳》小程序界面<br>命令行运行 node iOS_Ai.js</p>
<h4 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ:"></a>FAQ:</h4><p>1 每次跳跃的位置都不在中心（跳不准）</p>
<p>调整代码中config.json中pressCoefficient的数值，想跳近些就调小，反之调大</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.cc-lab.cn/heredocandnowdoc/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="蒋杲程">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="好">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/heredocandnowdoc/" itemprop="url">
                  PHP中字符串的heredoc结构和nowdoc结构
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-02-20 21:48:47" itemprop="dateCreated datePublished" datetime="2015-02-20T21:48:47+08:00">2015-02-20</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-07-13 10:33:26" itemprop="dateModified" datetime="2018-07-13T10:33:26+08:00">2018-07-13</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近在维护一个古老的PHP网站，没有前后台的分离，代码看起来很吃力，上面大段大段的HTML输出。在看的时候发现很多地方用了「&lt;&lt;&lt;」这样的符号来标记字符串，好像之前学习PHP的时候，只讲了单双引号两种表示字符串的方式。今天偶然在书上看到了，这种「&lt;&lt;&lt;」表示字符串的方式是heredoc和nowdoc结构。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">echo &lt;&lt;&lt;EOT</span><br><span class="line">   &lt;html&gt;</span><br><span class="line">   &lt;head&gt;&lt;title&gt;主页&lt;/title&gt;&lt;/head&gt;</span><br><span class="line">   &lt;body&gt;主页内容&lt;/body&gt;</span><br><span class="line">   &lt;/html&gt;</span><br><span class="line">EOT;</span><br></pre></td></tr></table></figure>
<p>一般来说，如果一段字符串里面有引号的话，我们会使用「\”」来进行转义，PHP中单引号和双引号都可以表示字符串，因此也可以使用单引号表示字符串的开始和结束。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &apos;这里的&quot;双引号&quot;不用转义&apos;;</span><br></pre></td></tr></table></figure></p>
<p>在HTML里面，标签的属性也使用了xxx=”yyy”的方式来表示。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;div-id&quot; class=&quot;div-class&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure></p>
<p>在输出大段HTML的时候，对所有双引号进行转义的工作量太大，而且对于维护不是很方便，经常出现引号没对齐的错误。通常我们会使用单引号来表示这种大段的里面有双引号的字符串。</p>
<p>不过HTML里面，也是允许单引号表示属性的。如果在输出的HTML里面存在单双引号混用的情况，传统的单双引号字符串会比较麻烦，因此我们使用了heredoc模式来表示字符串。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo&lt;&lt;&lt;EOT</span><br><span class="line">   &lt;div id=&quot;div-id&quot; class=&quot;div-class&quot;&gt;$content&lt;/div&gt;</span><br><span class="line">EOT;</span><br></pre></td></tr></table></figure>
<p>如图所示，heredoc模式相当于另外定义了一个字符串结束标记EOT，在「&lt;&lt;&lt;EOT」和「EOT」之间的单双引号，都不会被当成字符串开始和结束标记。这对于我们格式化输出内容是很有用的。</p>
<p>heredoc的使用具有如下特点：</p>
<p>1、开始标记和结束标记使用相同的字符串，通常以大写字母来写。</p>
<p>2、开始标记后不能出现空格或多余的字符。</p>
<p>3、结束标记必须顶头写，不能有缩进和空格，且在结束标记末尾要有分号 。</p>
<p>4、位于开始标记和结束标记之间的变量可以被正常解析，但是函数则不可以。在heredoc中，变量不需要用连接符「.」或「,」来拼接 。</p>
<p>在PHP5.3.0及其以后的版本中增加了nowdoc结构，其用法和heredoc相同，不同的是nowdoc类似于单引号，不会解析开始标记和结束标记之间的变量，这种结构很适合用于嵌入 PHP 代码或其它大段文本而无需对其中的特殊字符进行转义。</p>
<p>同样的之前的例子用nowdoc结构可以表示为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo&lt;&lt;&lt;&apos;EOT&apos;</span><br><span class="line">   &lt;div id=&quot;div-id&quot; class=&quot;div-class&quot;&gt;$content&lt;/div&gt;</span><br><span class="line">EOT;</span><br></pre></td></tr></table></figure>
<p>和heredoc结构用法唯一的区别就是开始标记用引号包起来，这里的$content会被原样输出而不会被解析成变量的值。</p>
<p>在使用heredoc和nowdoc结构的时候，经常会遇到如下的报错：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Parse error: syntax error, unexpected T_SL in php</span><br></pre></td></tr></table></figure></p>
<p>一般产生这种问题的原因是定界符之后有空格引起的，例如上面的EOT后面有空格就会报这个错误。处理是否有空格还有一个小技巧，就是利用编辑器的代码提示功能，以我用的notepad++为例。</p>
<p>正常的代码里面，整个heredoc结构字符串都是灰色的。</p>
<p>（完）</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.cc-lab.cn/compression/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="蒋杲程">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="好">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/compression/" itemprop="url">
                  数据压缩的极限
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-02-18 19:15:10" itemprop="dateCreated datePublished" datetime="2015-02-18T19:15:10+08:00">2015-02-18</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-07-13 10:33:26" itemprop="dateModified" datetime="2018-07-13T10:33:26+08:00">2018-07-13</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>单位的电子邮件最大只能发5MB的附件，因此在发送文件的时候，经常会使用压缩软件把附件进行压缩分卷，一个大的附件经常会分成十几甚至几十个小文件。在压缩的时候想起了很久以前思考的一个问题：</p>
<p>数据能不能被无限压缩？</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/compression/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.cc-lab.cn/jsonpstudy/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="蒋杲程">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="好">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/jsonpstudy/" itemprop="url">
                  JSONP的一点个人理解
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-02-16 16:14:57" itemprop="dateCreated datePublished" datetime="2015-02-16T16:14:57+08:00">2015-02-16</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-07-13 10:33:26" itemprop="dateModified" datetime="2018-07-13T10:33:26+08:00">2018-07-13</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>JSON很多人都听说过，JSONP可能知道的人就不如JSON那么多了。在这里记录下自己在学习JSONP时候的一点个人理解。</p>
<p>网上经常说JSONP是类似于在页面Document中插入<code>&lt;script&gt;</code>标签的方式来实现跨域数据访问，可能对于很多只对JSON有了解的人来说理解起来有点困难。百度百科上面对于JSONP有这样一句解释：</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/jsonpstudy/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">蒋杲程</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">6</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                    
                      
                    
                    <span class="site-state-item-count">1</span>
                    <span class="site-state-item-name">分类</span>
                  
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                    <span class="site-state-item-count">1</span>
                    <span class="site-state-item-name">标签</span>
                  
                </div>
              
            </nav>
          

          

          

          
          

          
          

          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">蒋杲程</span>

  

  
</div>




  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动 v3.7.1</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://theme-next.org">NexT.Muse</a> v6.3.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.3.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.3.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.3.0"></script>



  



  





  










  





  

  

  

  

  
  

  

  

  

  

  

</body>
</html>
